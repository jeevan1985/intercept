<!-- RTLAMR UTILITY METER MODE -->
<div id="rtlamrMode" class="mode-content">
    <div class="section">
        <h3>Frequency</h3>
        <div class="form-group">
            <label>Frequency (MHz)</label>
            <input type="text" id="rtlamrFrequency" value="912.0" placeholder="e.g., 912.0">
        </div>
        <div class="preset-buttons">
            <button class="preset-btn" onclick="setRtlamrFreq('912.0')">912.0 (NA)</button>
            <button class="preset-btn" onclick="setRtlamrFreq('868.0')">868.0 (EU)</button>
            <button class="preset-btn" onclick="setRtlamrFreq('915.0')">915.0</button>
        </div>
    </div>

    <div class="section">
        <h3>Settings</h3>
        <div class="form-group">
            <label>Gain (dB, 0 = auto)</label>
            <input type="text" id="rtlamrGain" value="0" placeholder="0-49 or 0 for auto">
        </div>
        <div class="form-group">
            <label>PPM Correction</label>
            <input type="text" id="rtlamrPpm" value="0" placeholder="Frequency correction">
        </div>
        <div class="form-group">
            <label>Message Type</label>
            <select id="rtlamrMsgType">
                <option value="scm">SCM (Standard Consumption Message)</option>
                <option value="scm+">SCM+ (Enhanced)</option>
                <option value="idm">IDM (Interval Data Message)</option>
                <option value="netidm">NetIDM (Network IDM)</option>
                <option value="r900">R900 (Neptune)</option>
                <option value="r900bcd">R900 BCD</option>
                <option value="all">All Types</option>
            </select>
        </div>
        <div class="form-group">
            <label>Filter by Meter ID (optional, comma-separated)</label>
            <input type="text" id="rtlamrFilterId" placeholder="e.g., 12345678,87654321">
        </div>
    </div>

    <div class="section">
        <h3>Protocols</h3>
        <div class="info-text" style="margin-bottom: 10px;">
            rtlamr decodes utility meter transmissions (water, gas, electric) using ERT protocol.
        </div>
        <div class="checkbox-group">
            <label>
                <input type="checkbox" id="rtlamrUnique" checked onchange="toggleRtlamrUnique()">
                Unique Messages Only
            </label>
            <label>
                <input type="checkbox" id="rtlamrLogging" onchange="toggleRtlamrLogging()">
                Enable Logging
            </label>
        </div>
    </div>

    <!-- Antenna Guide -->
    <div class="section">
        <h3>Antenna Guide</h3>
        <div style="font-size: 11px; color: var(--text-dim); line-height: 1.5;">
            <p style="margin-bottom: 8px; color: var(--accent-cyan); font-weight: 600;">
                ISM 900 MHz band &mdash; stock antenna is close but not optimal
            </p>

            <div style="background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 4px; padding: 10px; margin-bottom: 10px;">
                <strong style="color: var(--accent-cyan); font-size: 12px;">Stock Telescopic Antenna</strong>
                <ul style="margin: 6px 0 0 14px; padding: 0;">
                    <li><strong style="color: var(--text-primary);">912 MHz:</strong> Extend to ~8.2 cm (quarter-wave). The stock antenna is close enough to work</li>
                    <li><strong style="color: var(--text-primary);">Range:</strong> Most meters transmit at ~100 mW, expect 50&ndash;200 m range with stock antenna</li>
                </ul>
            </div>

            <div style="background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 4px; padding: 10px; margin-bottom: 10px;">
                <strong style="color: var(--accent-cyan); font-size: 12px;">Upgraded Options</strong>
                <ul style="margin: 6px 0 0 14px; padding: 0;">
                    <li><strong style="color: var(--text-primary);">Ground Plane:</strong> 8.2 cm vertical + four 8.2 cm radials at 45&deg; on SMA connector</li>
                    <li><strong style="color: var(--text-primary);">Yagi:</strong> Directional for targeting specific meters at distance (~$15&ndash;25)</li>
                    <li><strong style="color: var(--text-primary);">Placement:</strong> Near a window facing the meters. Line-of-sight matters most</li>
                </ul>
            </div>

            <div style="background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 4px; padding: 10px;">
                <strong style="color: var(--accent-cyan); font-size: 12px;">Quick Reference</strong>
                <table style="width: 100%; margin-top: 6px; font-size: 10px; border-collapse: collapse;">
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td style="padding: 3px 4px; color: var(--text-dim);">Frequency (NA)</td>
                        <td style="padding: 3px 4px; color: var(--text-primary); text-align: right;">912 MHz</td>
                    </tr>
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td style="padding: 3px 4px; color: var(--text-dim);">Frequency (EU)</td>
                        <td style="padding: 3px 4px; color: var(--text-primary); text-align: right;">868 MHz</td>
                    </tr>
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td style="padding: 3px 4px; color: var(--text-dim);">912 MHz &lambda;/4</td>
                        <td style="padding: 3px 4px; color: var(--text-primary); text-align: right;">8.2 cm</td>
                    </tr>
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td style="padding: 3px 4px; color: var(--text-dim);">Meter TX power</td>
                        <td style="padding: 3px 4px; color: var(--text-primary); text-align: right;">~100 mW</td>
                    </tr>
                    <tr>
                        <td style="padding: 3px 4px; color: var(--text-dim);">Polarization</td>
                        <td style="padding: 3px 4px; color: var(--text-primary); text-align: right;">Vertical</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <button class="run-btn" id="startRtlamrBtn" onclick="startRtlamrDecoding()">
        Start Listening
    </button>
    <button class="stop-btn" id="stopRtlamrBtn" onclick="stopRtlamrDecoding()" style="display: none;">
        Stop Listening
    </button>
</div>
